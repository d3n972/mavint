{{define "title"}}Home{{end}}
{{define "file" }}timetable{{end}}
{{define "headContent" }}
<style>
    [data-href] {
        cursor: pointer;
    }

    .mnr {
        font-family: MNR;
        font-size: 1em;
    }

    .icon {
        font-size: 1.5em;
    }

    .text-bold {
        font-weight: 700;
    }
</style>
{{end}}
{{define "footerContent" }}
<script src="https://cdn.jsdelivr.net/npm/jquery@3.0/dist/jquery.min.js"></script>
<script>
    $("table").on('click-row.bs.table', function (e, row, $element) {
        window.location = $element.data('href');
    });</script>
{{end}}

{{define "main" }}
<h4>{{.station.Station.Name}}</h4>
<h6 class="mnr icon">
    {{range $y,$svc:=.station.Services}}
    <span title="{{$svc.Description}}" onclick="alert('{{$svc.Description}}')">{{$svc.Sign.Character}}</span>
    {{end}}
</h6>
<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button"
            role="tab" aria-controls="home-tab-pane" aria-selected="true">Arrival
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button"
            role="tab" aria-controls="profile-tab-pane" aria-selected="false">Departure
        </button>
    </li>
</ul>
<div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
        <div class="">
            {{ range $x, $value := .arrival }}
            <div>
                <div class="border col p-2" onclick="document.location='/train/{{$value.TrainID}}'">
                    <div class="d-flex gap-3 text-bold">
                        <div class="">
                            {{if $value.ActualOrEstimatedArrive}}
                            {{$value.ActualOrEstimatedArrive | loctime}}
                            {{else}}
                            {{$value.Arrive | loctime}}
                            {{end}}
                            {{if gt $value.HavarianInfok.AktualisKeses 0.0}}
                            <small class="text-nowrap"> (+ {{$value.HavarianInfok.AktualisKeses}} p</small>
                            {{end}}
                        </div>
                        <div>
                            {{$value.StartStation.Name}} <i class="bi bi-arrow-right"></i> {{$value.EndStation.Name}}
                        </div>

                    </div>

                    <div class="d-flex align-self-center align-items-center">
                        {{if $value.ViszonylatiJel.Sign.Character}}
                        <span class="align-middle icon mnr"
                            style=" color: #{{$value.ViszonylatiJel.FontSzinKod}};">{{$value.ViszonylatiJel.Sign.Character}}</span>

                        {{else}}
                        <div class="align-items-center align-self-center d-flex flex-shrink-0 justify-content-center"
                            style="
                   margin: 2px;
                   max-height: 2ch;
                   border-radius: 3px;
                   padding: 5px;
                   margin-right:1ch;
                   width: 4ch;
           {{if ne $value.ViszonylatiJel.FontSzinKod  ""}}
               fill: #{{$value.ViszonylatiJel.HatterSzinKod}};
               border: 1px solid #{{$value.ViszonylatiJel.FontSzinKod}};
               background-color:#{{$value.ViszonylatiJel.FontSzinKod}}
           {{else}}
               fill: #{{$value.Kind.BackgrouColorCode}};
               border: 1px solid #{{$value.Kind.ForegroundColorCode}};
               background-color:#{{$value.Kind.ForegroundColorCode}}
           {{end}}">

                            <svg style="height: 12px; width:24px; ">
                                <use href="/public/assets/trainclasses.svg#icon-train-{{$value.FullType|toIconName}}" />
                            </svg>
                        </div>
                        {{end}}
                        <span class="{{if $value.ViszonylatiJel.Sign.Character}}ms-2{{end}}">{{ $value|getTrainName
                            }}</span>
                        <span class="mnr ms-3">
                            {{$value|getServiceIcons}}
                        </span>
                    </div>
                </div>
            </div>
            {{end}}
        </div>

    </div>
    <div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
        <div class="">
            {{ range $x, $value := .departure }}
            <div>
                <div class="border col p-2" onclick="document.location='/train/{{$value.TrainID}}'">
                    <div class="d-flex gap-3 text-bold">
                        <div class="">
                            {{if $value.ActualOrEstimatedStart}}
                            {{$value.ActualOrEstimatedStart | loctime}}
                            {{else}}
                            {{$value.Start | loctime}}
                            {{end}}
                            {{if gt $value.HavarianInfok.AktualisKeses 0.0}}
                            <small class="text-nowrap"> (+ {{$value.HavarianInfok.AktualisKeses}} p</small>
                            {{end}}
                        </div>
                        <div>
                            {{$value.StartStation.Name}} <i class="bi bi-arrow-right"></i> {{$value.EndStation.Name}}
                        </div>

                    </div>

                    <div class="d-flex align-self-center align-items-center">
                        {{if $value.ViszonylatiJel.Sign.Character}}
                        <span class="align-middle icon mnr"
                            style=" color: #{{$value.ViszonylatiJel.FontSzinKod}};">{{$value.ViszonylatiJel.Sign.Character}}</span>

                        {{else}}
                        <div class="align-items-center align-self-center d-flex flex-shrink-0 justify-content-center"
                            style="
                   margin: 2px;
                   max-height: 2ch;
                   border-radius: 3px;
                   padding: 5px;
                   margin-right:1ch;
                   width: 4ch;
           {{if ne $value.ViszonylatiJel.FontSzinKod  ""}}
               fill: #{{$value.ViszonylatiJel.HatterSzinKod}};
               border: 1px solid #{{$value.ViszonylatiJel.FontSzinKod}};
               background-color:#{{$value.ViszonylatiJel.FontSzinKod}}
           {{else}}
               fill: #{{$value.Kind.BackgrouColorCode}};
               border: 1px solid #{{$value.Kind.ForegroundColorCode}};
               background-color:#{{$value.Kind.ForegroundColorCode}}
           {{end}}">

                            <svg style="height: 12px; width:24px; ">
                                <use href="/public/assets/trainclasses.svg#icon-train-{{$value.FullType|toIconName}}" />
                            </svg>
                        </div>
                        {{end}}
                        <span class="{{if $value.ViszonylatiJel.Sign.Character}}ms-2{{end}}">{{ $value|getTrainName
                            }}</span>
                        <span class="mnr ms-3">
                            {{$value|getServiceIcons}}
                        </span>
                    </div>
                </div>
            </div>
            {{end}}
        </div>
    </div>
</div>
{{end}}